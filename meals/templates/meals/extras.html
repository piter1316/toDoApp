{% extends 'todo/base.html' %}


{% block body %}

<div class="modal-dialog modal-lg" role="document">
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title" id="modalTitle_{{ch_meal.id}}">
        Dodatki{% if meals_list_object %} dla: <span id="modalTitleSpan_{{ch_meal.id}}">{{meals_list_object}}</span> {% endif %}
      </h5>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body pt-0">
      {% if not meals_list_object.extras %}
        Dodaj z posiłku:
      {% else %}
        <div class="text-left">
          <small>Aktualny dodatek :
            <a class="text-dark text-decoration-none" href="{% url 'meals:edit_meal_ingredients' meals_list_object.extras.id %}">
              <i>{{meals_list_object.extras}}
              </i>
            </a>
          </small>
        </div>
        <div>Zmień:</div>
      {% endif %}
      {% for meal_option, meals in all_meals_dict.items %}
        <form method="post" action="{% url 'meals:edit_extras' meals_list_object.id  %}">{% csrf_token %}
          <select onchange="this.form.submit()" class="form-control mt-1" name="extras_select">
            <option>{{meal_option}}</option>
            {% for meal in meals %}
              <option value="{{meal.id}}">{{meal}} | {{meal.1.0}} kcal </option>
            {% endfor %}
          </select>
        </form>
      {% endfor %}
      <hr>
      {% if meals_list_object.extras %}
      <a href="{% url 'meals:delete_extras' meals_list_object.id %}" class="btn btn-block btn-danger text-light">
        Usuń {{meals_list_object.extras}}
      </a>
      {% endif %}
    </div>
    <div class="modal-footer">
      <a type="button" href="{% url 'meals:index' %}" class="btn btn-secondary" data-dismiss="modal">Zamknij</a>
    </div>
  </div>
</div>

{% endblock %}