<div class="col-12 col-md-4 col-xl-2 mb-2 ">
  <nav class="navbar navbar-expand-md navbar-light p-0">
    <button class="navbar-toggler " type="button" data-toggle="collapse" data-target="#menu" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse bg-light p-3 rounded shadow mt-1 "  id="menu">
      <ul class="nav flex-column  mx-auto">
        <a class=" nav-item btn btn-outline-secondary btn-block mb-1" href="{% url 'meals:index' %}">JADŁOSPIS</a>
        <a class=" nav-item btn btn-outline-secondary btn-block mb-1" href="{% url 'meals:edit_meals' %}">POSIŁKI</a>
        <!-- Button trigger modal -->
        {% if in_meals_list %}
        <div class="dropdown-divider"></div>
        <button type="button" class="btn btn-outline-info btn-block" data-toggle="modal" data-target="#newMealsListModal">
          Generuj nowy jadłospis
        </button>
        {% if meals_list %}
          <button type="button" class="btn btn-outline-primary btn-block" data-toggle="modal" data-target="#generateShoppingListsModal">
            GENERUJ LISTY ZAKUPÓW
          </button>
          <button type="button" onclick="createPDF()" class="btn btn-outline-secondary  btn-block">
            DRUKUJ JADŁOSPIS
          </button>
          <form action="{% url 'meals:delete_selected_days' %}" class="my-1" style="display:none;" id="deleteSelectedDays" method="POST">{% csrf_token %}
            {% for item in day_meal_option_meal_list %}
              {% for day, meals in item.items %}
                {% for meal in meals %}
                  {% for ml in meal%}<input type="checkbox"  style="display:none;" value="{{ml.id}}" id="mealsListPosition_{{ml.id}}" name="mealsListPosition">{% endfor %}
                {% endfor %}
              {% endfor %}
            {% endfor %}
            <button type="submit" class="btn btn-outline-warning btn-block mt-1"  >Usuń zaznaczone dni</button>
          </form>
          <a href="{% url 'meals:purge_meals_list' %}" class="btn btn-outline-danger btn-block mt-1" onclick="return confirm('Wyczyścić jadłospis?')">
            Wyczyść jadłospis
          </a>
          <!-- Modal -->
          <div class="modal fade" id="generateShoppingListsModal" tabindex="-1" role="dialog" aria-labelledby="generateShoppingListsModal" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Generacja list zakupów</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <form class="" action="{% url 'meals:generate_shopping_lists' %}" method="post">{% csrf_token %}
                    <label><input type="checkbox" checked>Wszystkie dni</label><br>
                    <label><input name="delete_generated_shopping_lists" checked type="checkbox">Usunąć listy wygenerowane poprzednio?</label>
                    <input type="number" class="form-control mb-1" required name="how_many_people" placeholder="Dla ilu osób?">
                    <button type="submit" class="btn btn-primary btn-block">GENERUJ</button>
                  </form>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Anuluj</button>
                </div>
              </div>
            </div>
          </div>
        {% endif %}

        {% endif %}
        <!-- Modal -->
        <div class="modal fade" id="newMealsListModal" tabindex="-1" role="dialog" aria-hidden="true">
          <form action="{% url 'meals:generate_meals_list' %}" method="post" class="modal-dialog modal-dialog-centered" role="document">
            {% csrf_token %}
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title">Generacja nowego jadłospisu</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <div class="form-row" id="meal_options_form">
                  {% for option in user_meals_options %}
                    <div class="col-6">
                      <label><input class="mealsOptions" type="checkbox" value="{{option.id}}" name="mealsOptions[]" checked id="{{option}}">{{option|upper}}</label>
                    </div>
                  {% endfor %}
                </div>
                <hr id="meal_options_form_hr" class="p-1 m-0">
                <div class="form-row">
                  <div class="input-group mb-3">
                    <input type="hidden" value="{{maximum_no_of_days_to_generate}}" id="maximum_no_of_days_to_generate">
                    <input class="form-control" type="number" name="howManyDays" value="1" id="howManyDays" min="1">
                    <div class="input-group-append">
                      <label class="input-group-text" for="howManyDays">Na ile dni</label>
                    </div>
                  </div>
                </div>
                <div class="form-row">
                  <div class="input-group mb-3">
                    <select class="form-control" name="first_day" id="first_day">
                      {% for day in first_day_input_list %}
                      <option value="{{day.id}}">{{day}}</option>
                      {% endfor %}
                    </select>
                    <div class="input-group-append">
                      <label class="input-group-text" for="first_day">Pierwszy dzień</label>
                    </div>
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" checked id="twice_the_same_meal" name="twice_the_same_meal">
                      <label class="form-check-label" for="twice_the_same_meal">
                        Jeden posiłek przez dwa dni?
                      </label>
                    </div>
                  </div>
                </div>
                {% if meals_list %}
                <div class="form-row">
                  <div class="form-group">
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox"  id="append_existing" name="append_existing">
                      <label class="form-check-label" for="append_existing">
                        Dodaj do istniejącego
                      </label>
                    </div>
                  </div>
                </div>
                <input type="hidden" id="maximum_no_of_days_to_generate_no_repeat" value="{{maximum_no_of_days_to_generate_no_repeat}}">
                <input type="hidden" id="maximum_no_of_days_to_generate_default" value="{{maximum_no_of_days_to_generate_default}}">
                {% if maximum_no_of_days_to_generate_no_repeat > 0 %}
                  <div class="form-row">
                    <div class="form-group">
                      <div class="form-check">

                        <input class="form-check-input" type="checkbox" checked id="no_repetition" name="no_repetition">
                        <label class="form-check-label" for="no_repetition">
                          Nie powtarzaj posiłków z obecnego jadłospisu
                        </label>
                      </div>
                    </div>
                  </div>
                {% endif %}
                {% endif %}
                <div class="form-row">
                  <div class="form-group">
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox"  id="empty_meals_list" name="empty_meals_list">
                      <label class="form-check-label" for="empty_meals_list">
                        SAM WYBIERAM DANIA
                      </label>
                    </div>
                  </div>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Anuluj</button>
                <button type="submit" class="btn btn-primary">Generuj</button>
              </div>
            </div>
          </form>
        </div>
      </ul>
    </div>
  </nav>
</div>